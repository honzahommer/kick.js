/*!
 * ga.js v1.0.0 (https://github.com/honzahommer/ga.js)
 * Copyright 2016 Honza Hommer <honza@hommer.cz>.
 * Licensed under the MIT licence
 */

/**
 * @param {window} window
 * @param {document} document
 * @param {undefined} [undefined]
 */
(function(window, document, undefined, start) {

/**
 * @param {String} method
 * @param {arguments} args
 * @param {*} item
 * @returns {Array}
 */
if (!'performance' in window) {
    var start = (new Date().getTime());

    window.performance = {
        now: function () {
            return ((new Date().getTime()) - start);
        }
    }
}

var _debug = false;

/**
 * @param {String} method
 * @param {arguments} args
 * @param {*} item
 * @returns {Array}
 */
function _arguments(method, args, item) {
    var _args = Array.prototype.slice.call(args);

    return (_args[method](item), _args);
}

/**
 * @param {String} rule
 * @param {*} subject
 * @returns {Boolean}
 */
function _validate(rule, subject) {
    switch (rule) {
        case 'id':
            return (/^ua-\d{4,9}-\d{1,4}$/i).test(subject.toString());
    }
}

/**
 * @param {Array} collection
 * @param {Function} iteratee
 */
function _for(collection, iteratee) {
    if (Object.prototype.toString.call(collection) !== '[object Array]') {
        try {
            collection = Array.prototype.slice.call(collection);
        } catch (e) {
            return false;
        }
    }

    for (var i = 0; i < collection.length; i++) {
        iteratee(collection[i], i);
    }
}

/**
 * @param {Object} collection
 * @param {Function} iteratee
 */
function _forEach(collection, iteratee) {
    if (typeof collection !== 'object') {
        return;
    }

    for (var prop in collection) {
        if(collection.hasOwnProperty(prop)) {
            iteratee(collection[prop], prop);
        }
    }
}


/**
 * @param {*} obj
 * @returns {Boolean}
 */
function _typeOf(obj) {
    return {}.toString.call(obj).split(' ')[1].slice(0, -1).toLowerCase();
}


/**
 * @param {String} [title]
 * @param {...*} args
 */
function _log() {
    var title;

    if (_debug === false) {
        console.error('v pici');
        return;
    }

    if (arguments.length > 1) {
        title = [].shift.apply(arguments);
    }

    if (title) {
        console.group.call(window, '[ga.js]', title);
    }

    console.info.apply(window, arguments);

    if (title) {
        console.groupEnd.call(window);
    }
}

/**
 * @constructor
 */
var GAjs = function () {
    if (arguments.length !== 0) {
        var create = this.create.apply(this, arguments);
    }

    return this;
};

/**
 * @param {String} id
 * @param {Object} [gaOptions]
 * @returns {GAjs}
 */
GAjs.prototype.create = function (id, gaOptions) {
    var that = this;

    this.gaOptions = gaOptions = (typeof gaOptions === 'object') ? gaOptions : {};
    this.namespace = '';
    this.gaObjName = '_ga';
    this.options = {
        debug: false,
        hitCb: {
            pageview: function () {
                var location = window.location;

                if (location.search.indexOf('utm_') != -1 && history.replaceState) {
                    history.replaceState({}, '', location.toString().replace(/(\&|\?)utm([_a-z0-9=]+)/g, ''));
                };
            }
        }
    };

    // separate ga.js options from tracker options
    _for(['debug'], function (option) {
        if (option in gaOptions) {
            that.options[option] = gaOptions[option]
            delete(gaOptions[option])
        }
    });

    // debug global
    _debug = !!this.options.debug;

    if (_validate('id', id) === false) {
        _log('tracking Id looks wrong', 'The tracking Id should only be of the format UA-NNNNNN-N');
    }

    // store the name of the GA object
    window.GoogleAnalyticsObject = this.gaObjName;

    // check whether the GA object is defined
    if ((this.gaObjName in this) === false) {
        // define the GA object
        // and add the tasks to the queue
        this[this.gaObjName] = window[this.gaObjName] = function () {
            (window[that.gaObjName].q = window[that.gaObjName].q || []).push(arguments);
        };

        that[that.gaObjName] = window[that.gaObjName];
    }

    // store the current timestamp
    this[this.gaObjName].l = window[this.gaObjName].l = (new Date()).getTime();

    // store namespace
    _for(arguments, function (argument) {
        if (_typeOf(argument) === 'object' && 'name' in argument) {
            var namespace = argument.name;

            return (that.namespace = namespace, window.GA[namespace] = that, true);
        }
    });

    // create a new script element
    var script = document.createElement('script');
    script.src = 'https://www.google-analytics.com/analytics.js';
    script.async = true;

    // insert the script element into the document
    var firstScript = document.getElementsByTagName('script')[0];
    firstScript.parentNode.insertBefore(script, firstScript);

    // create tracker
    var createTracker = this[this.gaObjName].apply(this, _arguments('unshift', arguments, 'create'));

    // log
    _log('creating tracker', 'New tracker', this.namespace ? '"' + this.namespace + '"' : '' ,'created');

    return this.pageview.call(this);
}

/**
 * @param {(String|Array)} collection
 * @param {...options} options
 * @returns {GAjs}
 */
GAjs.prototype.plugin = GAjs.prototype.require = function (name, options) {
    var namespace = this.namespace;
    var command = [namespace, 'require'].join('.');

    _log('loading plugin', 'Plugin "' + name + '" initialized on tracker', namespace ? '"' + namespace + '"' : '', arguments);

    return (this[this.gaObjName].apply(this, _arguments('unshift', arguments, command)), this);
}

/**
 * @param {...*} options
 * @returns {GAjs}
 */
GAjs.prototype.send = function () {
    var command = [this.namespace, 'send'].join('.');
    var options = (arguments.length === 0) ? [command] : _arguments('unshift', arguments, command);
    var hitType = options[1];

    _log('calling command', 'Command "' + hitType + '"', 'on tracker', this.namespace ? '"' + this.namespace + '"' : '' ,'called', options);

    return (window[this.gaObjName].apply(this, options), this);
}

// Create shorthand function for send hit types
_for(['pageview', 'event', 'social', 'screenview', 'timing', 'exception'], function (hitType) {
    /**
     * @param {...*} options
     * @returns {GAjs}
     */
    GAjs.prototype[hitType] = function () {
        var options = (arguments.length === 0) ? [hitType] : _arguments('unshift', arguments, hitType);

        if (hitType in this.options.hitCb && _typeOf(this.options.hitCb[hitType]) === 'function') {
            var count = options.length;
            var hitCb = this.options.hitCb[hitType];

            if (count && _typeOf(options[count - 1]) === 'object') {
                options[count - 1].hitCallback = hitCb;
            } else {
                options = _arguments('push', options, {
                    hitCallback: hitCb
                });
            }
        }

        _log('calling hit', 'Hit "' + hitType + '"', 'on tracker', this.namespace ? '"' + this.namespace + '"' : '' ,'called, triggering command "' + [this.namespace, hitType].join('.') + '"');

        return (this.send.apply(this, options), this);
    }
});

if (('GA' in window) === false) {
    window.GA = {
        start: start,
        now: function () {
            return Math.round(('performance' in window) ? performance.now() : ((new Date().getTime()) - GA.start));
        }
    };
}

var pkg = window.GA.js = GAjs;

_forEach(GAjs, function(item, key) {
    pkg[key] = item;
});

}(window, document, undefined, (new Date().getTime())));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy9nYS5qcyIsIi4uLy4uL3NyYy9qcy9nYS9fYmVmb3JlIiwiLi4vLi4vc3JjL2pzL2dhL3BvbHlmaWxscy5qcyIsIi4uLy4uL3NyYy9qcy9nYS9wcml2YXRlLmpzIiwiLi4vLi4vc3JjL2pzL2dhL2NvbnN0cnVjdC5qcyIsIi4uLy4uL3NyYy9qcy9nYS9jcmVhdGUuanMiLCIuLi8uLi9zcmMvanMvZ2EvcmVxdWlyZS5qcyIsIi4uLy4uL3NyYy9qcy9nYS9zZW5kLmpzIiwiLi4vLi4vc3JjL2pzL2dhL3dpbmRvdy5qcyIsIi4uLy4uL3NyYy9qcy9nYS9fYWZ0ZXIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztBQUN0RCxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDekMsQ0FBQyxFQUFFOztBQ0hILEdBQUc7QUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU07QUFDekIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRO0FBQzdCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7QUFDakMsQ0FBQyxFQUFFO0FBQ0gsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzs7QUNML0MsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTTtBQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUk7QUFDMUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUk7QUFDbEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDbkIsQ0FBQyxFQUFFO0FBQ0gsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDL0IsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsT0FBTyxJQUFJO0FBQ3ZDO0FBQ0EsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFCLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzFCLFlBQVksTUFBTSxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO0FBQ3BELFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMLENBQUM7O0FDZEQsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ25CO0FBQ0EsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTTtBQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUk7QUFDMUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUk7QUFDbEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDbkIsQ0FBQyxFQUFFO0FBQ0gsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtBQUNqRDtBQUNBLElBQUksTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUU7QUFDeEMsQ0FBQztBQUNEO0FBQ0EsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSTtBQUN2QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTztBQUNyQixDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUNyQixDQUFDLEVBQUU7QUFDSCxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDbkMsSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ25CLFFBQVEsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ2xCLFlBQVksTUFBTSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsSUFBSTtBQUN0RSxJQUFJLENBQUM7QUFDTCxDQUFDO0FBQ0Q7QUFDQSxHQUFHO0FBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxVQUFVO0FBQzVCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUTtBQUM3QixDQUFDLEVBQUU7QUFDSCxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDckMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDMUUsUUFBUSxHQUFHLENBQUMsQ0FBQztBQUNiLFlBQVksVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO0FBQ2hFLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckIsWUFBWSxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ3pCLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2pELFFBQVEsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDbkMsSUFBSSxDQUFDO0FBQ0wsQ0FBQztBQUNEO0FBQ0EsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVTtBQUM3QixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVE7QUFDN0IsQ0FBQyxFQUFFO0FBQ0gsUUFBUSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQ3pDLFFBQVEsTUFBTSxDQUFDO0FBQ2YsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDbEMsUUFBUSxFQUFFLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzdDLFlBQVksUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEVBQUU7QUFDN0MsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUc7QUFDakIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDckIsQ0FBQyxFQUFFO0FBQ0gsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLElBQUksTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRztBQUMxRSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQzFCLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJO0FBQ3JCLENBQUMsRUFBRTtBQUNILFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ2pCLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQztBQUNkO0FBQ0EsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDM0IsUUFBUSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxJQUFJLEdBQUc7QUFDaEMsUUFBUSxNQUFNLENBQUM7QUFDZixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQixRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRTtBQUMxQyxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoQixRQUFRLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRTtBQUNyRCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxFQUFFO0FBQzFDO0FBQ0EsSUFBSSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2hCLFFBQVEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3RDLElBQUksQ0FBQztBQUNMLENBQUM7O0FDL0ZELEdBQUc7QUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVc7QUFDZixDQUFDLEVBQUU7QUFDSCxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDeEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pDLFFBQVEsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFO0FBQ3hELElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2hCLEVBQUU7O0FDVEYsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRTtBQUNyQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQzlCLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ2xCLENBQUMsRUFBRTtBQUNILElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQ2xELElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3BCO0FBQ0EsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHO0FBQ2xGLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRztBQUN4QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFO0FBQzNCLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixRQUFRLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUNyQixRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDaEIsWUFBWSxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbkMsZ0JBQWdCLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDL0M7QUFDQSxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUNwRixvQkFBb0IsT0FBTyxDQUFDLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLE9BQU8sU0FBUyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSztBQUM5RyxnQkFBZ0IsRUFBRTtBQUNsQixZQUFZLENBQUM7QUFDYixRQUFRLENBQUM7QUFDVCxJQUFJLEVBQUU7QUFDTjtBQUNBLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU87QUFDbEQsSUFBSSxJQUFJLEdBQUcsS0FBSyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN2QyxRQUFRLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUNsQyxZQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7QUFDcEQsWUFBWSxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRTtBQUNyQyxRQUFRLENBQUM7QUFDVCxJQUFJLEdBQUc7QUFDUDtBQUNBLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNO0FBQ25CLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ2xDO0FBQ0EsSUFBSSxFQUFFLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDeEMsUUFBUSxJQUFJLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRztBQUNwRyxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLE1BQU07QUFDdEMsSUFBSSxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7QUFDbEQ7QUFDQSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPO0FBQzdDLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDN0MsUUFBUSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTTtBQUMvQixRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLO0FBQ3pDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3JFLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3hGLFFBQVEsRUFBRTtBQUNWO0FBQ0EsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN0RCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVM7QUFDbEMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLE9BQU8sR0FBRztBQUMvRTtBQUNBLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTO0FBQ3RCLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDekMsUUFBUSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDbkUsWUFBWSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQzFDO0FBQ0EsWUFBWSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDbkYsUUFBUSxDQUFDO0FBQ1QsSUFBSSxHQUFHO0FBQ1A7QUFDQSxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTztBQUNsQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsTUFBTSxHQUFHO0FBQ2xELElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUU7QUFDakUsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDeEI7QUFDQSxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRO0FBQ2xELElBQUksR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLG9CQUFvQixFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDakUsSUFBSSxXQUFXLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUU7QUFDN0Q7QUFDQSxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTztBQUNyQixJQUFJLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUk7QUFDckc7QUFDQSxJQUFJLEVBQUUsQ0FBQyxHQUFHO0FBQ1YsSUFBSSxJQUFJLEVBQUUsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEdBQUc7QUFDekc7QUFDQSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDcEMsQ0FBQzs7QUNqRkQsR0FBRztBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLFVBQVU7QUFDckMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPO0FBQzlCLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ2xCLENBQUMsRUFBRTtBQUNILElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUMzRSxJQUFJLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7QUFDbkMsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksTUFBTTtBQUNuRDtBQUNBLElBQUksSUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO0FBQzlIO0FBQ0EsSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLElBQUksRUFBRTtBQUMvRixDQUFDOztBQ1pELEdBQUc7QUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTztBQUN4QixDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQztBQUNsQixDQUFDLEVBQUU7QUFDSCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ25DLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxNQUFNO0FBQ3JELElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sRUFBRTtBQUNuRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUU7QUFDN0I7QUFDQSxJQUFJLElBQUksRUFBRSxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsT0FBTyxFQUFFO0FBQzVJO0FBQ0EsSUFBSSxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFO0FBQy9ELENBQUM7QUFDRDtBQUNBLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLO0FBQy9DLElBQUksR0FBRyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUMvRixJQUFJLEdBQUc7QUFDUCxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTztBQUM1QixLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQztBQUN0QixLQUFLLEVBQUU7QUFDUCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMzQyxRQUFRLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUU7QUFDdkc7QUFDQSxRQUFRLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ25HLFlBQVksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUN2QyxZQUFZLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtBQUNwRDtBQUNBLFlBQVksRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUNwRSxnQkFBZ0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3ZELFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3BCLGdCQUFnQixPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELG9CQUFvQixXQUFXLENBQUMsQ0FBQyxLQUFLO0FBQ3RDLGdCQUFnQixHQUFHO0FBQ25CLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUs7QUFDak07QUFDQSxRQUFRLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRTtBQUN0RCxJQUFJLENBQUM7QUFDTCxHQUFHOztBQ3hDSCxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDakMsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFFBQVEsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3JCLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzFCLFlBQVksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRztBQUNuSCxRQUFRLENBQUM7QUFDVCxJQUFJLEVBQUU7QUFDTixDQUFDO0FBQ0Q7QUFDQSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQzlCO0FBQ0EsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3BDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFDcEIsR0FBRzs7QUNiSCxFQUFFLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxPQUFPLE1BQU0iLCJmaWxlIjoiZ2EuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIEJhc2UgbmFtZXNwYWNlIGFuZCBoZWFydCBmb3IgR0FqcyBKYXZhU2NyaXB0LlxuICogQGF1dGhvciBIb256YSBIb21tZXIgPGhvbnphQGhvbW1lci5jej5cbiAqL1xuIiwiLyoqXG4gKiBAcGFyYW0ge3dpbmRvd30gd2luZG93XG4gKiBAcGFyYW0ge2RvY3VtZW50fSBkb2N1bWVudFxuICogQHBhcmFtIHt1bmRlZmluZWR9IFt1bmRlZmluZWRdXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQsIHN0YXJ0KSB7XG4iLCIvKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7YXJndW1lbnRzfSBhcmdzXG4gKiBAcGFyYW0geyp9IGl0ZW1cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuaWYgKCEncGVyZm9ybWFuY2UnIGluIHdpbmRvdykge1xuICAgIHZhciBzdGFydCA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG5cbiAgICB3aW5kb3cucGVyZm9ybWFuY2UgPSB7XG4gICAgICAgIG5vdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICgobmV3IERhdGUoKS5nZXRUaW1lKCkpIC0gc3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwidmFyIF9kZWJ1ZyA9IGZhbHNlO1xuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7YXJndW1lbnRzfSBhcmdzXG4gKiBAcGFyYW0geyp9IGl0ZW1cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gX2FyZ3VtZW50cyhtZXRob2QsIGFyZ3MsIGl0ZW0pIHtcbiAgICB2YXIgX2FyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKTtcblxuICAgIHJldHVybiAoX2FyZ3NbbWV0aG9kXShpdGVtKSwgX2FyZ3MpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBydWxlXG4gKiBAcGFyYW0geyp9IHN1YmplY3RcbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBfdmFsaWRhdGUocnVsZSwgc3ViamVjdCkge1xuICAgIHN3aXRjaCAocnVsZSkge1xuICAgICAgICBjYXNlICdpZCc6XG4gICAgICAgICAgICByZXR1cm4gKC9edWEtXFxkezQsOX0tXFxkezEsNH0kL2kpLnRlc3Qoc3ViamVjdC50b1N0cmluZygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheX0gY29sbGVjdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWVcbiAqL1xuZnVuY3Rpb24gX2Zvcihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY29sbGVjdGlvbikgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjb2xsZWN0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKGNvbGxlY3Rpb25baV0sIGkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdH0gY29sbGVjdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWVcbiAqL1xuZnVuY3Rpb24gX2ZvckVhY2goY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICBpZiAodHlwZW9mIGNvbGxlY3Rpb24gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgaWYoY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgaXRlcmF0ZWUoY29sbGVjdGlvbltwcm9wXSwgcHJvcCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIF90eXBlT2Yob2JqKSB7XG4gICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwob2JqKS5zcGxpdCgnICcpWzFdLnNsaWNlKDAsIC0xKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IFt0aXRsZV1cbiAqIEBwYXJhbSB7Li4uKn0gYXJnc1xuICovXG5mdW5jdGlvbiBfbG9nKCkge1xuICAgIHZhciB0aXRsZTtcblxuICAgIGlmIChfZGVidWcgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ3YgcGljaScpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRpdGxlID0gW10uc2hpZnQuYXBwbHkoYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgY29uc29sZS5ncm91cC5jYWxsKHdpbmRvdywgJ1tnYS5qc10nLCB0aXRsZSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5pbmZvLmFwcGx5KHdpbmRvdywgYXJndW1lbnRzKTtcblxuICAgIGlmICh0aXRsZSkge1xuICAgICAgICBjb25zb2xlLmdyb3VwRW5kLmNhbGwod2luZG93KTtcbiAgICB9XG59XG4iLCIvKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgR0FqcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICB2YXIgY3JlYXRlID0gdGhpcy5jcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG4iLCIvKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtPYmplY3R9IFtnYU9wdGlvbnNdXG4gKiBAcmV0dXJucyB7R0Fqc31cbiAqL1xuR0Fqcy5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGlkLCBnYU9wdGlvbnMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLmdhT3B0aW9ucyA9IGdhT3B0aW9ucyA9ICh0eXBlb2YgZ2FPcHRpb25zID09PSAnb2JqZWN0JykgPyBnYU9wdGlvbnMgOiB7fTtcbiAgICB0aGlzLm5hbWVzcGFjZSA9ICcnO1xuICAgIHRoaXMuZ2FPYmpOYW1lID0gJ19nYSc7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgIGhpdENiOiB7XG4gICAgICAgICAgICBwYWdldmlldzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guaW5kZXhPZigndXRtXycpICE9IC0xICYmIGhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgbG9jYXRpb24udG9TdHJpbmcoKS5yZXBsYWNlKC8oXFwmfFxcPyl1dG0oW19hLXowLTk9XSspL2csICcnKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBzZXBhcmF0ZSBnYS5qcyBvcHRpb25zIGZyb20gdHJhY2tlciBvcHRpb25zXG4gICAgX2ZvcihbJ2RlYnVnJ10sIGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAgICAgaWYgKG9wdGlvbiBpbiBnYU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoYXQub3B0aW9uc1tvcHRpb25dID0gZ2FPcHRpb25zW29wdGlvbl1cbiAgICAgICAgICAgIGRlbGV0ZShnYU9wdGlvbnNbb3B0aW9uXSlcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gZGVidWcgZ2xvYmFsXG4gICAgX2RlYnVnID0gISF0aGlzLm9wdGlvbnMuZGVidWc7XG5cbiAgICBpZiAoX3ZhbGlkYXRlKCdpZCcsIGlkKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgX2xvZygndHJhY2tpbmcgSWQgbG9va3Mgd3JvbmcnLCAnVGhlIHRyYWNraW5nIElkIHNob3VsZCBvbmx5IGJlIG9mIHRoZSBmb3JtYXQgVUEtTk5OTk5OLU4nKTtcbiAgICB9XG5cbiAgICAvLyBzdG9yZSB0aGUgbmFtZSBvZiB0aGUgR0Egb2JqZWN0XG4gICAgd2luZG93Lkdvb2dsZUFuYWx5dGljc09iamVjdCA9IHRoaXMuZ2FPYmpOYW1lO1xuXG4gICAgLy8gY2hlY2sgd2hldGhlciB0aGUgR0Egb2JqZWN0IGlzIGRlZmluZWRcbiAgICBpZiAoKHRoaXMuZ2FPYmpOYW1lIGluIHRoaXMpID09PSBmYWxzZSkge1xuICAgICAgICAvLyBkZWZpbmUgdGhlIEdBIG9iamVjdFxuICAgICAgICAvLyBhbmQgYWRkIHRoZSB0YXNrcyB0byB0aGUgcXVldWVcbiAgICAgICAgdGhpc1t0aGlzLmdhT2JqTmFtZV0gPSB3aW5kb3dbdGhpcy5nYU9iak5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgKHdpbmRvd1t0aGF0LmdhT2JqTmFtZV0ucSA9IHdpbmRvd1t0aGF0LmdhT2JqTmFtZV0ucSB8fCBbXSkucHVzaChhcmd1bWVudHMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoYXRbdGhhdC5nYU9iak5hbWVdID0gd2luZG93W3RoYXQuZ2FPYmpOYW1lXTtcbiAgICB9XG5cbiAgICAvLyBzdG9yZSB0aGUgY3VycmVudCB0aW1lc3RhbXBcbiAgICB0aGlzW3RoaXMuZ2FPYmpOYW1lXS5sID0gd2luZG93W3RoaXMuZ2FPYmpOYW1lXS5sID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuICAgIC8vIHN0b3JlIG5hbWVzcGFjZVxuICAgIF9mb3IoYXJndW1lbnRzLCBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgICAgICAgaWYgKF90eXBlT2YoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiAnbmFtZScgaW4gYXJndW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBuYW1lc3BhY2UgPSBhcmd1bWVudC5uYW1lO1xuXG4gICAgICAgICAgICByZXR1cm4gKHRoYXQubmFtZXNwYWNlID0gbmFtZXNwYWNlLCB3aW5kb3cuR0FbbmFtZXNwYWNlXSA9IHRoYXQsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBjcmVhdGUgYSBuZXcgc2NyaXB0IGVsZW1lbnRcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9ICdodHRwczovL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiAgICAvLyBpbnNlcnQgdGhlIHNjcmlwdCBlbGVtZW50IGludG8gdGhlIGRvY3VtZW50XG4gICAgdmFyIGZpcnN0U2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgIGZpcnN0U2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHQpO1xuXG4gICAgLy8gY3JlYXRlIHRyYWNrZXJcbiAgICB2YXIgY3JlYXRlVHJhY2tlciA9IHRoaXNbdGhpcy5nYU9iak5hbWVdLmFwcGx5KHRoaXMsIF9hcmd1bWVudHMoJ3Vuc2hpZnQnLCBhcmd1bWVudHMsICdjcmVhdGUnKSk7XG5cbiAgICAvLyBsb2dcbiAgICBfbG9nKCdjcmVhdGluZyB0cmFja2VyJywgJ05ldyB0cmFja2VyJywgdGhpcy5uYW1lc3BhY2UgPyAnXCInICsgdGhpcy5uYW1lc3BhY2UgKyAnXCInIDogJycgLCdjcmVhdGVkJyk7XG5cbiAgICByZXR1cm4gdGhpcy5wYWdldmlldy5jYWxsKHRoaXMpO1xufVxuIiwiLyoqXG4gKiBAcGFyYW0geyhTdHJpbmd8QXJyYXkpfSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0gey4uLm9wdGlvbnN9IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtHQWpzfVxuICovXG5HQWpzLnByb3RvdHlwZS5wbHVnaW4gPSBHQWpzLnByb3RvdHlwZS5yZXF1aXJlID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbmFtZXNwYWNlID0gdGhpcy5uYW1lc3BhY2U7XG4gICAgdmFyIGNvbW1hbmQgPSBbbmFtZXNwYWNlLCAncmVxdWlyZSddLmpvaW4oJy4nKTtcblxuICAgIF9sb2coJ2xvYWRpbmcgcGx1Z2luJywgJ1BsdWdpbiBcIicgKyBuYW1lICsgJ1wiIGluaXRpYWxpemVkIG9uIHRyYWNrZXInLCBuYW1lc3BhY2UgPyAnXCInICsgbmFtZXNwYWNlICsgJ1wiJyA6ICcnLCBhcmd1bWVudHMpO1xuXG4gICAgcmV0dXJuICh0aGlzW3RoaXMuZ2FPYmpOYW1lXS5hcHBseSh0aGlzLCBfYXJndW1lbnRzKCd1bnNoaWZ0JywgYXJndW1lbnRzLCBjb21tYW5kKSksIHRoaXMpO1xufVxuIiwiLyoqXG4gKiBAcGFyYW0gey4uLip9IG9wdGlvbnNcbiAqIEByZXR1cm5zIHtHQWpzfVxuICovXG5HQWpzLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21tYW5kID0gW3RoaXMubmFtZXNwYWNlLCAnc2VuZCddLmpvaW4oJy4nKTtcbiAgICB2YXIgb3B0aW9ucyA9IChhcmd1bWVudHMubGVuZ3RoID09PSAwKSA/IFtjb21tYW5kXSA6IF9hcmd1bWVudHMoJ3Vuc2hpZnQnLCBhcmd1bWVudHMsIGNvbW1hbmQpO1xuICAgIHZhciBoaXRUeXBlID0gb3B0aW9uc1sxXTtcblxuICAgIF9sb2coJ2NhbGxpbmcgY29tbWFuZCcsICdDb21tYW5kIFwiJyArIGhpdFR5cGUgKyAnXCInLCAnb24gdHJhY2tlcicsIHRoaXMubmFtZXNwYWNlID8gJ1wiJyArIHRoaXMubmFtZXNwYWNlICsgJ1wiJyA6ICcnICwnY2FsbGVkJywgb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gKHdpbmRvd1t0aGlzLmdhT2JqTmFtZV0uYXBwbHkodGhpcywgb3B0aW9ucyksIHRoaXMpO1xufVxuXG4vLyBDcmVhdGUgc2hvcnRoYW5kIGZ1bmN0aW9uIGZvciBzZW5kIGhpdCB0eXBlc1xuX2ZvcihbJ3BhZ2V2aWV3JywgJ2V2ZW50JywgJ3NvY2lhbCcsICdzY3JlZW52aWV3JywgJ3RpbWluZycsICdleGNlcHRpb24nXSwgZnVuY3Rpb24gKGhpdFR5cGUpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLip9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7R0Fqc31cbiAgICAgKi9cbiAgICBHQWpzLnByb3RvdHlwZVtoaXRUeXBlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgPyBbaGl0VHlwZV0gOiBfYXJndW1lbnRzKCd1bnNoaWZ0JywgYXJndW1lbnRzLCBoaXRUeXBlKTtcblxuICAgICAgICBpZiAoaGl0VHlwZSBpbiB0aGlzLm9wdGlvbnMuaGl0Q2IgJiYgX3R5cGVPZih0aGlzLm9wdGlvbnMuaGl0Q2JbaGl0VHlwZV0pID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSBvcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBoaXRDYiA9IHRoaXMub3B0aW9ucy5oaXRDYltoaXRUeXBlXTtcblxuICAgICAgICAgICAgaWYgKGNvdW50ICYmIF90eXBlT2Yob3B0aW9uc1tjb3VudCAtIDFdKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zW2NvdW50IC0gMV0uaGl0Q2FsbGJhY2sgPSBoaXRDYjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hcmd1bWVudHMoJ3B1c2gnLCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgICAgIGhpdENhbGxiYWNrOiBoaXRDYlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX2xvZygnY2FsbGluZyBoaXQnLCAnSGl0IFwiJyArIGhpdFR5cGUgKyAnXCInLCAnb24gdHJhY2tlcicsIHRoaXMubmFtZXNwYWNlID8gJ1wiJyArIHRoaXMubmFtZXNwYWNlICsgJ1wiJyA6ICcnICwnY2FsbGVkLCB0cmlnZ2VyaW5nIGNvbW1hbmQgXCInICsgW3RoaXMubmFtZXNwYWNlLCBoaXRUeXBlXS5qb2luKCcuJykgKyAnXCInKTtcblxuICAgICAgICByZXR1cm4gKHRoaXMuc2VuZC5hcHBseSh0aGlzLCBvcHRpb25zKSwgdGhpcyk7XG4gICAgfVxufSk7XG4iLCJpZiAoKCdHQScgaW4gd2luZG93KSA9PT0gZmFsc2UpIHtcbiAgICB3aW5kb3cuR0EgPSB7XG4gICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgbm93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoJ3BlcmZvcm1hbmNlJyBpbiB3aW5kb3cpID8gcGVyZm9ybWFuY2Uubm93KCkgOiAoKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSAtIEdBLnN0YXJ0KSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG52YXIgcGtnID0gd2luZG93LkdBLmpzID0gR0FqcztcblxuX2ZvckVhY2goR0FqcywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgcGtnW2tleV0gPSBpdGVtO1xufSk7XG4iLCJ9KHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCwgKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSkpO1xuIl19